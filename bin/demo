#!/usr/bin/env node

var FlashingButtons = require('../lib/flashingButtons.js').FlashingButtons;

if(process.argv.length > 2){
  var port = process.argv[2];
}else{
  console.log("Usage: demo <serial port>");
  process.exit(1);
}

var fb = new FlashingButtons({
  port: port,
  baud: 57600
});

fb.on('connect', function(){
  console.log('Connected');
  fb.on('press', function(details){
    console.log("Button " + details.button + " pressed");
  });
  fb.on('release', function(details){
    console.log("Button " + details.button + " released");
  });
  fb.setLed(0, 'FLASH', function(err){
    if(err){
      console.log(err);
    }else{
      console.log('flashing');
    }
  });
});